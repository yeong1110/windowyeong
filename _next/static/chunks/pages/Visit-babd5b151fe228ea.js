(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[921],{5052:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var i=s(7876),a=s(4232),r=s(6042),n=s(2964);let d=(0,r.Wp)({apiKey:"AIzaSyAEzXIfitsmgvUCbA9tX4EWvl7cu5ttzd4",authDomain:"windowy-dd051.firebaseapp.com",projectId:"windowy-dd051",storageBucket:"windowy-dd051.firebasestorage.app",messagingSenderId:"575684159299",appId:"1:575684159299:web:bdb1f39f928d36887931f6"}),_=(0,n.aU)(d);function l(){let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=(0,n.P)((0,n.rJ)(_,"guestbook"),(0,n.My)("createdAt","desc")),s=(0,n.aQ)(e,e=>{t(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>s()},[]),(0,i.jsx)("ul",{className:"wy__visit__lists",children:e.map(e=>{var t;return(0,i.jsxs)("li",{className:"wy__visit__list",children:[(0,i.jsxs)("div",{className:"wy__visit__list__top",children:[(0,i.jsx)("p",{children:e.name}),(0,i.jsx)("p",{children:(null===(t=e.createdAt)||void 0===t?void 0:t.toDate)?e.createdAt.toDate().toLocaleString():"날짜 없음"})]}),(0,i.jsx)("div",{className:"wy__visit__list__bottom",children:(0,i.jsx)("p",{children:e.message})})]},e.id)})})}let c=()=>{async function e(e){e.preventDefault();let t=e.currentTarget,{name:s,content:i}=Object.fromEntries(new FormData(t).entries());if(!s||!i){alert("이름과 내용을 입력해주세요.");return}try{await (0,n.gS)((0,n.rJ)(_,"guestbook"),{name:s,message:i,createdAt:(0,n.O5)()}),alert("방명록이 등록되었습니다."),t.reset()}catch(e){console.error("Firestore 저장 에러",e),alert("오류가 발생했습니다.")}}return(0,a.useEffect)(()=>{console.log("hello")},[]),(0,i.jsxs)("div",{className:"wy__visit",children:[(0,i.jsx)("div",{className:"wy__visit__write",children:(0,i.jsxs)("form",{method:"post",onSubmit:e,children:[(0,i.jsxs)("div",{className:"wy__visit__input__wrap",children:[(0,i.jsx)("p",{children:"이름"}),(0,i.jsx)("input",{type:"text",name:"name"})]}),(0,i.jsx)("div",{className:"wy__visit__textarea__wrap",children:(0,i.jsx)("textarea",{name:"content",id:"",defaultValue:"입력해주세요..."})}),(0,i.jsx)("div",{className:"wy__visit__button__wrap",children:(0,i.jsx)("button",{type:"submit",children:"보내기"})})]})}),(0,i.jsx)(l,{})]})}},9900:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/Visit",function(){return s(5052)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[671,512,636,593,792],()=>t(9900)),_N_E=e.O()}]);